<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agenda de Sombrancelhas</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{font-family:Poppins,Arial,sans-serif;background:linear-gradient(180deg,#fff6f8,#ffeef2);color:#4a3b3b;display:flex;flex-direction:column;min-height:100vh}
  
  header{background:#e8a0b3;color:white;padding:1.5rem 2rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 16px rgba(0,0,0,0.08)}
  header h1{font-size:2rem;font-weight:700;letter-spacing:1px;}
  .header-actions{display:flex;align-items:center;gap:20px}
  header button{background:linear-gradient(90deg,#e8a0b3,#c44f71);color:white;border:none;padding:.7rem 1.5rem;border-radius:25px;font-weight:600;cursor:pointer;transition:.3s;box-shadow:0 2px 8px rgba(200,79,113,0.08)}
  header button:hover{background:linear-gradient(90deg,#c44f71,#e8a0b3);transform:translateY(-2px);}
  
  .container{flex:1;padding:2rem 1.5rem;max-width:700px;margin:auto}
  h2{text-align:center;margin-bottom:1.5rem;color:#c44f71;font-size:1.6rem;letter-spacing:.5px;}
  
  .card{background:white;border-radius:18px;padding:2rem;box-shadow:0 6px 24px rgba(200,79,113,0.08);margin-bottom:2rem}
  input, select, button{width:100%;padding:.9rem;margin:.7rem 0;border:1.5px solid #e8a0b3;border-radius:14px;font-size:1.05rem;transition:.3s}
  input:focus, select:focus{outline:none;border-color:#c44f71;box-shadow:0 0 8px #e8a0b355}
  button{background:linear-gradient(90deg,#e8a0b3,#c44f71);color:white;font-weight:600;border:none;transition:.3s;box-shadow:0 2px 8px rgba(200,79,113,0.08)}
  button:hover{background:linear-gradient(90deg,#c44f71,#e8a0b3);}
  #mensagem{text-align:center;font-weight:bold;margin-top:1rem;min-height:2rem}
  
  .admin-panel{display:none;background:#fff6f8;border:2px dashed #e8a0b3;border-radius:14px;padding:1.5rem;margin-top:1.5rem}
  .admin-panel h3{text-align:center;margin-bottom:1rem;color:#c44f71;font-size:1.2rem;}
  .admin-panel .filtro-data{margin-bottom:1rem}
  .admin-panel ul{list-style:none;margin-top:1rem;padding:0}
  .admin-panel li{background:white;padding:.7rem;margin:.4rem 0;border-radius:10px;font-size:1rem;box-shadow:0 2px 8px rgba(200,79,113,0.04);display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
  .admin-btns button{margin-left:5px;padding:4px 10px;font-size:.9rem;border-radius:7px;cursor:pointer}
  .btn-edit{background:#f7c948;color:#333}
  .btn-delete{background:#e57373;color:white}
  .btn-whatsapp{background:#25d366;color:white}
  
  footer{background:#fbe0e8;padding:1.2rem;text-align:center}
  footer p{margin-bottom:.5rem;font-weight:bold;color:#c44f71;letter-spacing:.5px;}
  
  .social-links{display:flex;gap:18px;justify-content:center}
  .social-btn{width:52px;height:52px;background:white;border-radius:50%;display:flex;justify-content:center;align-items:center;box-shadow:0 4px 12px rgba(0,0,0,0.13);transition:transform 0.3s, box-shadow 0.3s;border:none;outline:none;cursor:pointer;}
  .social-btn:hover{transform:scale(1.12);box-shadow:0 8px 18px rgba(0,0,0,0.18)}
  .social-btn svg{width:32px;height:32px;display:block;}
  .calendar{display:flex;flex-wrap:wrap;margin:1.2rem 0}
  .day{flex:1 0 14%;padding:.9rem;margin:.2rem;background:#fff3f6;text-align:center;border-radius:10px;cursor:pointer;transition:.2s;border:1.5px solid transparent;font-weight:500;letter-spacing:.5px;}
  .day:hover{background:#fddce6}
  .day.selected{background:#e8a0b3;color:white;border-color:#c44f71}
  .time-select{margin-top:.5rem}
</style>
</head>
<body>

<header>
  <h1>Studio Sombrancelhas</h1>
  <div class="header-actions">
    <div class="social-links">
      <a href="https://www.instagram.com/seuinstagram" target="_blank" class="social-btn insta" title="Instagram" aria-label="Instagram">
        <svg viewBox="0 0 448 448"><defs><radialGradient id="insta-gradient" cx="30%" cy="107%" r="150%" fx="30%" fy="107%"><stop offset="0%" stop-color="#fdf497"/><stop offset="5%" stop-color="#fdf497"/><stop offset="45%" stop-color="#fd5949"/><stop offset="60%" stop-color="#d6249f"/><stop offset="90%" stop-color="#285AEB"/></radialGradient></defs><rect width="448" height="448" rx="90" fill="url(#insta-gradient)"/><path d="M224 144a80 80 0 1 0 0 160 80 80 0 0 0 0-160zm124-24a28 28 0 1 1-56 0 28 28 0 0 1 56 0z" fill="#fff"/><circle cx="224" cy="224" r="64" fill="#fff"/></svg>
      </a>
      <a href="https://wa.me/5511999999999" target="_blank" class="social-btn zap" title="WhatsApp" aria-label="WhatsApp">
        <svg viewBox="0 0 448 448"><circle cx="224" cy="224" r="224" fill="#25d366"/><path d="M337.6 110.4c-30.4-30.4-71-47.2-114.4-47.2-89.6 0-162.4 72.8-162.4 162.4 0 28.8 7.2 56.8 20.8 81.6l-22.4 81.6 83.2-21.6c23.2 12.8 49.6 20 77.6 20 89.6 0 162.4-72.8 162.4-162.4 0-43.2-16.8-84-47.2-114.4zm-114.4 261.6c-25.6 0-50.4-6.4-72-18.4l-5.6-3.2-49.6 12.8 13.6-48-3.6-5.6c-12.8-21.6-19.2-46.4-19.2-72 0-78.4 63.2-142.4 142.4-142.4 38.4 0 74.4 15.2 101.6 42.4 27.2 27.2 42.4 63.2 42.4 101.6 0 78.4-63.2 142.4-142.4 142.4zm77.6-108.8c-4-2-23.2-11.2-26.8-12.8-3.6-1.6-6.4-2.4-9.2 2-2.8 4.4-10.8 12.8-13.2 15.2-2.4 2.4-4.8 2.8-8.8 1.2-4-1.6-16.8-6.2-32-19.8-11.8-10.4-19.8-23.2-22.2-27.2-2.4-4-0.2-6.2 1.8-8.2 1.8-1.8 4-4.8 6-7.2 2-2.4 2.6-4 4-6.8 1.2-2.8 0.6-5.2-0.2-7.2-.8-2-7.2-17.6-9.8-24.2-2.6-6.4-5.2-5.6-7.2-5.6-1.8 0-4-.2-6.2-.2s-5.6.8-8.6 4c-3 3.2-11.2 10.8-11.2 26.2 0 15.4 11.8 30.2 13.4 32.2 1.6 2 23.2 35.6 56.2 48.6 7.8 3.2 13.8 5.2 18.6 6.6 7.8 2.4 14.8 2 20.4 1.2 6.2-.8 19.2-7.8 21.8-15.4 2.6-7.6 2.6-14.2 1.8-15.4-.8-1.2-3.6-2-7.6-4z" fill="#fff"/></svg>
      </a>
    </div>
    <button onclick="abrirLogin()">Admin</button>
  </div>
</header>

<div class="container">
<h2>Agende seu horário ✨</h2>
<div class="card">
  <form id="formAgendamento">
    <input type="text" id="nome" placeholder="Seu nome" required>
    <input type="tel" id="telefone" placeholder="Seu telefone (DDD+Número)" required>
    
    <label>Escolha o dia:</label>
    <div class="calendar" id="calendar"></div>

    <label>Escolha o horário:</label>
    <select id="horario" required class="time-select"></select>

    <label>Escolha o serviço:</label>
    <select id="servico" required>
      <option value="henna">Sombrancelha com Henna - R$40 (1h)</option>
      <option value="semHenna">Sombrancelha sem Henna - R$25 (30min)</option>
    </select>

    <div id="total" style="font-weight:bold;margin-top:.5rem;"></div>
    <button type="submit">Confirmar Agendamento</button>
  </form>
  <div id="mensagem"></div>
</div>

<div class="admin-panel" id="adminPanel">
  <h3>Painel do Administrador</h3>

  <div class="filtro-data">
    <label>Filtrar por data:</label>
    <input type="date" id="filtroData">
  </div>

  <form id="formAdmin">
    <label for="novaData">Escolha a data:</label>
    <input type="date" id="novaData" required>

    <label for="novoHorario">Adicionar horário:</label>
    <input type="time" id="novoHorario" required>

    <button type="submit">Adicionar Horário</button>
  </form>
  <h4 style="margin-top:1rem; color:#c44f71;">Horários e reservas:</h4>
  <ul id="listaHorarios"></ul>
</div>
</div>

<footer>
<p>Siga-nos nas redes sociais</p>
<div class="social-links">
  <a href="https://www.instagram.com/seuinstagram" target="_blank" class="social-btn insta" title="Instagram" aria-label="Instagram">
    <svg viewBox="0 0 448 448"><defs><radialGradient id="insta-gradient2" cx="30%" cy="107%" r="150%" fx="30%" fy="107%"><stop offset="0%" stop-color="#fdf497"/><stop offset="5%" stop-color="#fdf497"/><stop offset="45%" stop-color="#fd5949"/><stop offset="60%" stop-color="#d6249f"/><stop offset="90%" stop-color="#285AEB"/></radialGradient></defs><rect width="448" height="448" rx="90" fill="url(#insta-gradient2)"/><path d="M224 144a80 80 0 1 0 0 160 80 80 0 0 0 0-160zm124-24a28 28 0 1 1-56 0 28 28 0 0 1 56 0z" fill="#fff"/><circle cx="224" cy="224" r="64" fill="#fff"/></svg>
  </a>
  <a href="https://wa.me/5511999999999" target="_blank" class="social-btn zap" title="WhatsApp" aria-label="WhatsApp">
    <svg viewBox="0 0 448 448"><circle cx="224" cy="224" r="224" fill="#25d366"/><path d="M337.6 110.4c-30.4-30.4-71-47.2-114.4-47.2-89.6 0-162.4 72.8-162.4 162.4 0 28.8 7.2 56.8 20.8 81.6l-22.4 81.6 83.2-21.6c23.2 12.8 49.6 20 77.6 20 89.6 0 162.4-72.8 162.4-162.4 0-43.2-16.8-84-47.2-114.4zm-114.4 261.6c-25.6 0-50.4-6.4-72-18.4l-5.6-3.2-49.6 12.8 13.6-48-3.6-5.6c-12.8-21.6-19.2-46.4-19.2-72 0-78.4 63.2-142.4 142.4-142.4 38.4 0 74.4 15.2 101.6 42.4 27.2 27.2 42.4 63.2 42.4 101.6 0 78.4-63.2 142.4-142.4 142.4zm77.6-108.8c-4-2-23.2-11.2-26.8-12.8-3.6-1.6-6.4-2.4-9.2 2-2.8 4.4-10.8 12.8-13.2 15.2-2.4 2.4-4.8 2.8-8.8 1.2-4-1.6-16.8-6.2-32-19.8-11.8-10.4-19.8-23.2-22.2-27.2-2.4-4-0.2-6.2 1.8-8.2 1.8-1.8 4-4.8 6-7.2 2-2.4 2.6-4 4-6.8 1.2-2.8 0.6-5.2-0.2-7.2-.8-2-7.2-17.6-9.8-24.2-2.6-6.4-5.2-5.6-7.2-5.6-1.8 0-4-.2-6.2-.2s-5.6.8-8.6 4c-3 3.2-11.2 10.8-11.2 26.2 0 15.4 11.8 30.2 13.4 32.2 1.6 2 23.2 35.6 56.2 48.6 7.8 3.2 13.8 5.2 18.6 6.6 7.8 2.4 14.8 2 20.4 1.2 6.2-.8 19.2-7.8 21.8-15.4 2.6-7.6 2.6-14.2 1.8-15.4-.8-1.2-3.6-2-7.6-4z" fill="#fff"/></svg>
  </a>
</div>
</footer>

<script>
const calendarEl = document.getElementById("calendar");
const selectHorario = document.getElementById("horario");
const listaHorarios = document.getElementById("listaHorarios");
const formAgendamento = document.getElementById("formAgendamento");
const formAdmin = document.getElementById("formAdmin");
const mensagem = document.getElementById("mensagem");
const servicoSelect = document.getElementById("servico");
const totalEl = document.getElementById("total");
const filtroData = document.getElementById("filtroData");

let horarios = JSON.parse(localStorage.getItem("horarios")) || [];
let selectedDay = null;

function criarCalendario(){
  calendarEl.innerHTML="";
  const hoje = new Date();
  for(let i=0;i<7;i++){
    const dia = new Date();
    dia.setDate(hoje.getDate()+i);
    const div = document.createElement("div");
    div.classList.add("day");
    div.textContent = dia.toLocaleDateString('pt-BR',{day:'2-digit', month:'2-digit'});
    div.dataset.date = dia.toISOString().split('T')[0];
    div.addEventListener("click",()=>selecionarDia(div));
    calendarEl.appendChild(div);
  }
}

function selecionarDia(div){
  document.querySelectorAll(".day").forEach(d=>d.classList.remove("selected"));
  div.classList.add("selected");
  selectedDay = div.dataset.date;
  atualizarHorarios();
}

function atualizarHorarios(){
  selectHorario.innerHTML="";
  listaHorarios.innerHTML="";
  const filtro = filtroData.value || selectedDay;
  if(!filtro) return;

  const diaHorarios = horarios.filter(h=>h.data===filtro);
  diaHorarios.forEach(h=>{
    if(!h.reservado && filtro===selectedDay){
      let option = document.createElement("option");
      option.value = h.hora;
      option.textContent = h.hora;
      selectHorario.appendChild(option);
    }
    let li = document.createElement("li");
    li.innerHTML = `<strong>${h.data} ${h.hora}</strong> - ${h.reservado ? `${h.cliente.nome} (${h.servico})` : "Disponível"}`;
    
    let btns = document.createElement("div");
    btns.classList.add("admin-btns");

    if(h.reservado){
      let btnZap = document.createElement("button");
      btnZap.classList.add("btn-whatsapp");
      btnZap.textContent = "WhatsApp";
      btnZap.onclick = ()=>{ window.open(`https://wa.me/${h.cliente.telefone.replace(/\D/g,'')}`,"_blank"); };
      
      let btnEdit = document.createElement("button");
      btnEdit.classList.add("btn-edit");
      btnEdit.textContent = "Editar";
      btnEdit.onclick = ()=>editarAgendamento(h);
      
      let btnDel = document.createElement("button");
      btnDel.classList.add("btn-delete");
      btnDel.textContent = "Excluir";
      btnDel.onclick = ()=>excluirAgendamento(h);

      btns.appendChild(btnZap);
      btns.appendChild(btnEdit);
      btns.appendChild(btnDel);
    } else {
      let btnRemove = document.createElement("button");
      btnRemove.classList.add("btn-delete");
      btnRemove.textContent = "Remover";
      btnRemove.onclick = ()=>{
        if(confirm(`Deseja remover o horário ${h.data} ${h.hora}?`)){
          horarios = horarios.filter(x => !(x.data===h.data && x.hora===h.hora));
          atualizarHorarios();
        }
      };
      btns.appendChild(btnRemove);
    }

    li.appendChild(btns);
    listaHorarios.appendChild(li);
  });
  calcularTotal();
  localStorage.setItem("horarios",JSON.stringify(horarios));
}

formAgendamento.addEventListener("submit",(e)=>{
  e.preventDefault();
  if(!selectedDay){mensagem.textContent="⚠️ Selecione um dia"; return;}
  const nome = document.getElementById("nome").value;
  const telefone = document.getElementById("telefone").value;
  const hora = selectHorario.value;
  const servico = servicoSelect.value;
  const valor = servico==="henna"?40:25;
  const duracao = servico==="henna"?60:30;

  let horario = horarios.find(h=>h.data===selectedDay && h.hora===hora);
  if(horario && !horario.reservado){
    horario.reservado=true;
    horario.cliente={nome,telefone};
    horario.servico=servico==="henna"?"Com Henna":"Sem Henna";
    horario.valor=valor;
    horario.duracao=duracao;
    mensagem.textContent=`✅ Agendamento confirmado para ${selectedDay} ${hora} - Total R$${valor}`;
    mensagem.style.color="green";
  }else{
    mensagem.textContent="⚠️ Horário indisponível";
    mensagem.style.color="red";
  }
  atualizarHorarios();
  formAgendamento.reset();
});

formAdmin.addEventListener("submit",(e)=>{
  e.preventDefault();
  const novaData = document.getElementById("novaData").value;
  const novoHorario = document.getElementById("novoHorario").value;

  if(!novaData){ alert("Selecione uma data!"); return; }

  const hoje = new Date();
  hoje.setHours(0,0,0,0);
  const limite = new Date();
  limite.setDate(hoje.getDate()+30);
  const dataEscolhida = new Date(novaData);
  if(dataEscolhida < hoje || dataEscolhida > limite){
    alert("⚠️ Só é permitido cadastrar datas até 30 dias a partir de hoje.");
    return;
  }

  if(novoHorario && !horarios.some(h=>h.data===novaData && h.hora===novoHorario)){
    horarios.push({data:novaData,hora:novoHorario,reservado:false});
  } else {
    alert("⚠️ Esse horário já existe para a data escolhida.");
  }

  atualizarHorarios();
  formAdmin.reset();
});

filtroData.addEventListener("change",atualizarHorarios);

function abrirLogin(){
  let senha=prompt("Digite a senha de administrador:");
  if(senha==="1234"){document.getElementById("adminPanel").style.display="block"}
  else{alert("Senha incorreta!")}
}

function calcularTotal(){
  const servico = servicoSelect.value;
  const valor = servico==="henna"?40:25;
  totalEl.textContent=`Total: R$${valor}`;
}

function excluirAgendamento(h){
  if(confirm("Deseja excluir este agendamento?")){
    h.reservado=false;
    h.cliente=null;
    h.servico=null;
    atualizarHorarios();
  }
}

function editarAgendamento(h){
  const novoNome = prompt("Nome do cliente:", h.cliente.nome);
  const novoTel = prompt("Telefone:", h.cliente.telefone);
  if(novoNome && novoTel){
    h.cliente.nome = novoNome;
    h.cliente.telefone = novoTel;
    atualizarHorarios();
  }
}

criarCalendario();
</script>

</body>
</html>
